<%@ page import="it.unisa.nexware.application.beans.CompanyBean" %>
<%@ page import="it.unisa.nexware.application.beans.AdminBean" %>
<%
    HttpSession s = request.getSession();
    CompanyBean loggedCompany = (CompanyBean) s.getAttribute("company");
    AdminBean loggedAdmin = (AdminBean) s.getAttribute("admin");
%>

<header class="desktop-header">
    <div class="top-bar-wrapper">
        <div class="top-bar">
            <a <%= "/".equals(request.getRequestURI()) ? "" : "href=\"/\"" %>><img src="${pageContext.request.contextPath}/GeneralData/imgs/logo.png" id="banner-image" /></a>

            <div class="user-actions">
                <a href="${pageContext.request.contextPath}/myNexware">
                    <span class="user-action">
                        <i class="fa-solid fa-user"></i>

                        <% if (loggedCompany != null) { %>
                        <span class="welcome-user">Bentornato</span>
                        <span class="username">
                            <%= loggedCompany.getCompanyName() != null && !loggedCompany.getCompanyName().isBlank() ? loggedCompany.getCompanyName() : loggedCompany.getUsername() %>
                        </span>
                        <% } else if (loggedAdmin != null) { %>
                        <span class="welcome-user">Bentornato</span>
                        <span class="username admin">
                            <%= loggedAdmin.getUsername() %>
                        </span>
                        <% } %>
                    </span>
                </a>
                <% if (loggedAdmin == null) { %>
                <a href="${pageContext.request.contextPath}/myNexware/cart/">
                    <span class="user-action"><i class="fa-solid fa-cart-shopping"></i></span>
                </a>
                <% } %>
            </div>
        </div>

        <hr class="header-line" />
    </div>

    <div class="search-bar">
        <i class="fa-solid fa-magnifying-glass search-icon" ></i>
        <form class="search-form" action="${pageContext.request.contextPath}/catalogue/">
            <input type="search" class="search-input" name="q" placeholder="Cerca software..." autocomplete="off" />
            <input type="submit" class="search-btn" value="Cerca" />
        </form>
    </div>

    <nav class="main-nav">
        <ul>
            <li><a href="${pageContext.request.contextPath}/">HOME</a></li>
            <li><a href="${pageContext.request.contextPath}/catalogue">CATALOGO</a></li>
            <li><a href="${pageContext.request.contextPath}/site-related/aboutus">CHI SIAMO</a></li>
            <li><a href="${pageContext.request.contextPath}/site-related/contactus">CONTATTACI</a></li>
        </ul>
    </nav>
</header>

<header class="mobile-header">
    <div class="header-top">
        <div class="search-wrapper">
            <i class="fa-solid fa-magnifying-glass search-icon mobile" ></i>
            <form action="${pageContext.request.contextPath}/catalogue">
                <input type="text" name="q" placeholder="Cerca software..." />
            </form>
        </div>

        <button class="hamburger-btn" id="menuToggle" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>

    <nav class="mobile-nav" id="mobileNav">
        <a href="${pageContext.request.contextPath}/">HOME</a>
        <a href="${pageContext.request.contextPath}/catalogue">CATALOGO</a>
        <a href="${pageContext.request.contextPath}/site-related/aboutus">CHI SIAMO</a>
        <a href="${pageContext.request.contextPath}/site-related/contactus">CONTATTACI</a>
        <a href="${pageContext.request.contextPath}/myNexware">AREA UTENTE</a>
        <a href="${pageContext.request.contextPath}/myNexware/cart/">CARRELLO</a>
    </nav>
</header>

<script src="/GeneralData/js/MobileHeaderHandler.js"></script>